<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucerne (city) - OpenSwiss.info</title>
    <meta name="description" content="Lucerne city overview and information">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <div class="logo">open <span class="swiss">swiss</span> info</div>
                <div class="language-bar">
                    <div class="language-links">
                        <a href="#de">DE</a>
                        <span>|</span>
                        <a href="#fr">FR</a>
                        <span>|</span>
                        <a href="#it">IT</a>
                        <span>|</span>
                        <a href="#en" class="active">EN</a>
                    </div>
                </div>
            </div>
            <nav class="nav">
                <div class="nav-item">
                    <a href="index.html">Home</a>
                </div>
                <div class="nav-item">
                    <a href="place.html" class="active">Location</a>
                    <div class="dropdown">
                        <a href="lucerne.html">Canton of Lucerne</a>
                        <div class="dropdown-item">
                            <a href="lucerne-city.html" style="padding-left: 32px;">Lucerne (city)</a>
                            <div class="subdropdown">
                                <a href="#rules">Rules</a>
                                <a href="#national" style="padding-left: 32px;">National</a>
                                <a href="#cantonal" style="padding-left: 32px;">Cantonal</a>
                                <a href="#municipal" style="padding-left: 32px;">Municipal</a>
                            </div>
                        </div>
                        <div class="dropdown-item">
                            <a href="#kriens" style="padding-left: 32px;">Kriens</a>
                            <div class="subdropdown">
                                <a href="#rules-kriens">Rules</a>
                                <a href="#national-kriens" style="padding-left: 32px;">National</a>
                                <a href="#cantonal-kriens" style="padding-left: 32px;">Cantonal</a>
                                <a href="#municipal-kriens" style="padding-left: 32px;">Municipal</a>
                            </div>
                        </div>
                        <div class="dropdown-item">
                            <a href="#emmen" style="padding-left: 32px;">Emmen</a>
                            <div class="subdropdown">
                                <a href="#rules-emmen">Rules</a>
                                <a href="#national-emmen" style="padding-left: 32px;">National</a>
                                <a href="#cantonal-emmen" style="padding-left: 32px;">Cantonal</a>
                                <a href="#municipal-emmen" style="padding-left: 32px;">Municipal</a>
                            </div>
                        </div>
                        <a href="#canton-nidwalden">Canton of Nidwalden</a>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="#data">Data</a>
                    <div class="dropdown">
                        <a href="#demographics">demographics</a>
                        <a href="#politics">politics</a>
                        <a href="#culture">culture</a>
                        <a href="#economy">economy</a>
                        <a href="#geography">geography</a>
                        <a href="#education">education</a>
                        <a href="#healthcare">healthcare</a>
                        <a href="#environment">environment</a>
                    </div>
                </div>
                <div class="nav-item">
                    <a href="visualizations.html">Visualizations</a>
                    <div class="dropdown">
                        <a href="visualizations.html">rail</a>
                        <a href="traffic.html">road</a>
                    </div>
                </div>
            </nav>
        </header>

        <div class="graph-panel">
            <h2 class="panel-title">Quick Facts</h2>
            <div style="padding: 20px;">
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 16px; margin-bottom: 16px;">
                    <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #1a1a1a;">Canton</h3>
                    <p style="font-size: 13px; color: #666;">Lucerne</p>
                </div>
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 16px; margin-bottom: 16px;">
                    <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #1a1a1a;">Population</h3>
                    <p style="font-size: 13px; color: #666;">~82,000</p>
                </div>
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 16px; margin-bottom: 16px;">
                    <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #1a1a1a;">Area</h3>
                    <p style="font-size: 13px; color: #666;">29.1 km²</p>
                </div>
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 16px;">
                    <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #1a1a1a;">Elevation</h3>
                    <p style="font-size: 13px; color: #666;">435 m</p>
                </div>
                <div style="background: white; border: 1px solid #e0e0e0; padding: 16px; margin-top: 16px; text-align: center;">
                    <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: #1a1a1a;">Coat of Arms</h3>
                    <svg width="120" height="140" viewBox="0 0 120 140" xmlns="http://www.w3.org/2000/svg">
                        <!-- Shield outline -->
                        <path d="M 10 10 L 110 10 L 110 90 Q 60 130 10 90 Z" fill="white" stroke="#333" stroke-width="2"/>

                        <!-- Vertical division - blue (left) and white (right) -->
                        <defs>
                            <clipPath id="city-shield-clip">
                                <path d="M 10 10 L 110 10 L 110 90 Q 60 130 10 90 Z"/>
                            </clipPath>
                        </defs>

                        <!-- Blue half (left) -->
                        <rect x="10" y="10" width="50" height="120" fill="#0066CC" clip-path="url(#city-shield-clip)"/>

                        <!-- White half (right) -->
                        <rect x="60" y="10" width="50" height="120" fill="white" clip-path="url(#city-shield-clip)"/>

                        <!-- Shield border -->
                        <path d="M 10 10 L 110 10 L 110 90 Q 60 130 10 90 Z" fill="none" stroke="#333" stroke-width="2"/>
                    </svg>
                </div>
            </div>
        </div>

        <div class="chat-panel">
            <div class="chat-header">
                <h1 class="chat-title">Lucerne (city)</h1>
                <p class="chat-subtitle">Capital of Canton Lucerne</p>
            </div>

            <div style="flex: 1;">
                <!-- Overview Facts -->
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 24px; margin-bottom: 24px;">
                    <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #1a1a1a;">Overview</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Official Language</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">German</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Postal Codes</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">6000-6006, 6014-6015</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Location</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Lake Lucerne</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Municipality Code</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">1061</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Coordinates</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">47°03′N 8°18′E</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">District</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Lucerne</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Neighboring Municipalities</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Adligenswil, Emmen, Horw, Kriens, Malters</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Founded</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">8th century (first documented 840)</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Mayor</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Stadtpräsident (City President)</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">City Council</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">48 members (Grosser Stadtrat)</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Notable Landmarks</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Chapel Bridge, Lion Monument, Old Town</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Main Station</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Lucerne Railway Station (Luzern Bahnhof)</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Universities</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Lucerne University of Applied Sciences</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Tourism</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Major destination, annual visitors 7+ million</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Economy</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Tourism, banking, retail, technology</p>
                        </div>
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #666;">Cultural Events</h4>
                            <p style="font-size: 14px; color: #1a1a1a;">Lucerne Festival, Fasnacht (carnival)</p>
                        </div>
                    </div>
                </div>

                <!-- Interactive Map -->
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 24px; margin-bottom: 24px;">
                    <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #1a1a1a;">City Map</h3>
                    <div id="city-map" style="width: 100%; height: 500px; border: 1px solid #e0e0e0; border-radius: 4px; overflow: hidden;"></div>
                    <div id="district-info" style="margin-top: 16px; padding: 12px; background: white; border: 1px solid #e0e0e0; border-radius: 4px; min-height: 60px;">
                        <p style="font-size: 13px; color: #666; text-align: center;">Click on the map to explore Lucerne city districts</p>
                    </div>
                </div>

                <!-- Districts -->
                <div style="background: #fafafa; border: 1px solid #e0e0e0; padding: 24px;">
                    <h3 style="font-size: 20px; font-weight: 600; margin-bottom: 16px; color: #1a1a1a;">
                        Districts & Quarters
                        <span style="font-size: 14px; font-weight: 400; color: #999;">(29 total)</span>
                    </h3>
                    <div id="districts-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 8px;">
                        <!-- District tiles will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="citations-panel">
            <h2 class="panel-title">About Lucerne</h2>
            <div class="citations-list">
                <div class="citation">
                    <div class="citation-number">[1]</div>
                    <div class="citation-title">Historic City</div>
                    <div class="citation-excerpt">
                        Lucerne is known for its preserved medieval architecture, including the Chapel Bridge (Kapellbrücke) and Water Tower.
                    </div>
                </div>
                <div class="citation">
                    <div class="citation-number">[2]</div>
                    <div class="citation-title">Cultural Center</div>
                    <div class="citation-excerpt">
                        The city hosts numerous festivals, museums, and cultural events throughout the year, making it a major tourist destination.
                    </div>
                </div>
                <div class="citation">
                    <div class="citation-number">[3]</div>
                    <div class="citation-title">Economy</div>
                    <div class="citation-excerpt">
                        Major economic sectors include tourism, banking, retail, and conventions. The city is home to several international companies.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize Leaflet map centered on Lucerne city
        const map = L.map('city-map').setView([47.0502, 8.3093], 13);

        // Add OpenStreetMap tile layer with grayscale filter
        const tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19,
            className: 'grayscale-tiles'
        }).addTo(map);

        // Add CSS for grayscale map
        const style = document.createElement('style');
        style.textContent = `
            .grayscale-tiles {
                filter: grayscale(100%) contrast(1.1) brightness(1.05);
                -webkit-filter: grayscale(100%) contrast(1.1) brightness(1.05);
            }

            .district-tile {
                padding: 10px 12px;
                background: white;
                color: #666;
                text-decoration: none;
                border: 1px solid #e0e0e0;
                border-radius: 4px;
                font-size: 13px;
                transition: all 0.2s;
                cursor: pointer;
                text-align: left;
            }

            .district-tile:hover {
                border-color: #dc2626;
                background: #fffbfb;
                transform: translateY(-1px);
                box-shadow: 0 2px 4px rgba(220, 38, 38, 0.1);
            }

            .district-tile.active {
                background: #dc2626;
                color: white;
                border-color: #dc2626;
            }
        `;
        document.head.appendChild(style);

        // Lucerne city boundary (simplified polygon)
        const cityBoundary = [
            // Northern boundary
            [47.0850, 8.2800],
            [47.0880, 8.2900],
            [47.0900, 8.3000],
            [47.0910, 8.3100],
            [47.0900, 8.3200],
            [47.0880, 8.3300],

            // Eastern boundary
            [47.0850, 8.3400],
            [47.0800, 8.3500],
            [47.0750, 8.3550],
            [47.0700, 8.3580],
            [47.0650, 8.3600],
            [47.0600, 8.3580],
            [47.0550, 8.3550],

            // Southeastern boundary
            [47.0500, 8.3500],
            [47.0450, 8.3450],
            [47.0400, 8.3400],
            [47.0350, 8.3350],
            [47.0300, 8.3300],

            // Southern boundary (near lake)
            [47.0280, 8.3250],
            [47.0260, 8.3200],
            [47.0240, 8.3150],
            [47.0220, 8.3100],
            [47.0200, 8.3050],
            [47.0180, 8.3000],
            [47.0170, 8.2950],

            // Western boundary
            [47.0180, 8.2900],
            [47.0200, 8.2850],
            [47.0250, 8.2800],
            [47.0300, 8.2750],
            [47.0350, 8.2720],
            [47.0400, 8.2700],
            [47.0450, 8.2700],
            [47.0500, 8.2720],
            [47.0550, 8.2750],

            // Northwestern boundary
            [47.0600, 8.2750],
            [47.0650, 8.2750],
            [47.0700, 8.2760],
            [47.0750, 8.2780],
            [47.0800, 8.2800]
        ];

        // Add city boundary as red polygon
        const cityPolygon = L.polygon(cityBoundary, {
            color: '#dc2626',
            weight: 3,
            fillColor: '#dc2626',
            fillOpacity: 0.05,
            opacity: 0.8
        }).addTo(map);

        cityPolygon.bindPopup('<div style="text-align: center;"><strong>City of Lucerne</strong><br><span style="font-size: 12px; color: #666;">Area: 29.1 km²</span></div>');

        // Districts with approximate coordinates
        const districts = [
            { name: 'Altstadt', lat: 47.0515, lon: 8.3055, description: 'Historic old town center' },
            { name: 'Neustadt', lat: 47.0485, lon: 8.3120, description: 'New town area' },
            { name: 'Hirschmatt', lat: 47.0440, lon: 8.3090, description: 'Residential district' },
            { name: 'Tribschen', lat: 47.0380, lon: 8.3200, description: 'Lakeside area' },
            { name: 'Bruch', lat: 47.0580, lon: 8.3180, description: 'Northern district' },
            { name: 'Dreilinden', lat: 47.0620, lon: 8.3250, description: 'Northern residential area' },
            { name: 'Geissenstein', lat: 47.0350, lon: 8.2950, description: 'Western district' },
            { name: 'Grosshof', lat: 47.0280, lon: 8.3050, description: 'Southern area' },
            { name: 'Grenzhof', lat: 47.0680, lon: 8.3100, description: 'Northern border area' },
            { name: 'Hobel', lat: 47.0450, lon: 8.2950, description: 'Western residential area' },
            { name: 'Hochwacht', lat: 47.0550, lon: 8.2900, description: 'Northwestern district' },
            { name: 'Hubelmatt West', lat: 47.0400, lon: 8.3000, description: 'Western Hubelmatt' },
            { name: 'Hubelmatt Ost', lat: 47.0420, lon: 8.3050, description: 'Eastern Hubelmatt' },
            { name: 'In Gassen', lat: 47.0500, lon: 8.3000, description: 'Central area' },
            { name: 'Iselimatt', lat: 47.0320, lon: 8.3150, description: 'Southern district' },
            { name: 'Kantonsspital', lat: 47.0380, lon: 8.3090, description: 'Cantonal hospital area' },
            { name: 'Littau', lat: 47.0550, lon: 8.2750, description: 'Western suburban area' },
            { name: 'Luzernerhof', lat: 47.0480, lon: 8.3180, description: 'Eastern district' },
            { name: 'Maihof', lat: 47.0420, lon: 8.3180, description: 'Eastern residential area' },
            { name: 'Matt', lat: 47.0530, lon: 8.3020, description: 'Central northern area' },
            { name: 'Obergrund-Allmend', lat: 47.0350, lon: 8.2850, description: 'Western suburban area' },
            { name: 'Reussbühl', lat: 47.0680, lon: 8.3300, description: 'Northeastern district' },
            { name: 'Ruopigen', lat: 47.0750, lon: 8.3200, description: 'Northern area' },
            { name: 'Sagen', lat: 47.0650, lon: 8.3000, description: 'Northern district' },
            { name: 'Schönbühl', lat: 47.0600, lon: 8.2850, description: 'Northwestern area' },
            { name: 'Steghof', lat: 47.0520, lon: 8.3250, description: 'Eastern district' },
            { name: 'Unterlachen-Schädrüti', lat: 47.0280, lon: 8.3200, description: 'Southern lakeside' },
            { name: 'Untergrund-Gütsch', lat: 47.0450, lon: 8.3350, description: 'Southeastern hills' },
            { name: 'Würzenbach-Schädrütihalde', lat: 47.0320, lon: 8.3300, description: 'Southern hills' }
        ];

        // Add markers for districts
        const districtMarkers = {};
        districts.forEach(district => {
            const icon = L.divIcon({
                className: 'custom-marker',
                html: `<div style="
                    width: 8px;
                    height: 8px;
                    background: #666666;
                    border: 2px solid white;
                    border-radius: 50%;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    transition: all 0.2s;
                "></div>`,
                iconSize: [8, 8],
                iconAnchor: [4, 4]
            });

            const marker = L.marker([district.lat, district.lon], { icon: icon })
                .addTo(map);

            marker.bindPopup(`
                <div style="text-align: center;">
                    <strong>${district.name}</strong><br>
                    <span style="font-size: 12px; color: #666;">${district.description}</span>
                </div>
            `);

            // Update info panel on marker hover
            marker.on('mouseover', function() {
                const infoPanel = document.getElementById('district-info');
                infoPanel.innerHTML = `
                    <div>
                        <h4 style="font-size: 16px; font-weight: 600; color: #1a1a1a; margin-bottom: 4px;">${district.name}</h4>
                        <p style="font-size: 13px; color: #666;">${district.description}</p>
                    </div>
                `;
            });

            districtMarkers[district.name] = marker;
        });

        // Generate district tiles
        const grid = document.getElementById('districts-grid');
        districts.forEach(district => {
            const tile = document.createElement('button');
            tile.className = 'district-tile';
            tile.textContent = district.name;

            tile.addEventListener('click', () => {
                // Remove active class from all tiles
                document.querySelectorAll('.district-tile').forEach(t => t.classList.remove('active'));
                tile.classList.add('active');

                // Zoom to district on map
                map.setView([district.lat, district.lon], 15, { animate: true });

                // Open marker popup
                const marker = districtMarkers[district.name];
                if (marker) {
                    marker.openPopup();
                }

                // Update info panel
                const infoPanel = document.getElementById('district-info');
                infoPanel.innerHTML = `
                    <div>
                        <h4 style="font-size: 16px; font-weight: 600; color: #1a1a1a; margin-bottom: 4px;">${district.name}</h4>
                        <p style="font-size: 13px; color: #666;">${district.description}</p>
                    </div>
                `;

                // Scroll map into view
                document.getElementById('city-map').scrollIntoView({ behavior: 'smooth', block: 'center' });
            });

            grid.appendChild(tile);
        });
    </script>
</body>
</html>
